# 🎉 Courses Generator Web App - Text-to-Speech & Wav2Lip

## ✅ Что готово

Мы успешно создали полноценное веб-приложение для создания синхронизированных видео с использованием **Text-to-Speech** и **Wav2Lip**:

### 🔧 Основной функционал:

1. **📹 Загрузка видео** - видео с человеком, говорящим
2. **📝 Ввод текста** - текст, который должен сказать человек
3. **🎵 Генерация аудио** - автоматическое преобразование текста в речь (TTS)
4. **🎬 Синхронизация** - синхронизация движения губ с новым аудио (Wav2Lip)
5. **📥 Скачивание результата** - готовое видео с синхронизированной речью

### 🔐 Система безопасности:

- **Аутентификация пользователей** (регистрация, вход, личный кабинет)
- **Управление проектами** (создание, редактирование, мониторинг)
- **Проверка прав доступа** (каждый пользователь видит только свои проекты)
- **Хеширование паролей** (безопасное хранение учетных данных)

### 🗄️ Техническая архитектура:

- **Flask 2.3.3** - веб-фреймворк
- **PostgreSQL** - реляционная база данных
- **Docker** - контейнеризация
- **gTTS & pyttsx3** - Text-to-Speech генерация
- **Wav2Lip** - синхронизация движения губ

## 🚀 Как использовать

### 1. Доступ к приложению

- **Веб-приложение**: http://localhost:5000
- **pgAdmin**: http://localhost:8080 (admin@example.com / admin123)
- **PostgreSQL**: localhost:5432

### 2. Демо аккаунты

- **Администратор**: admin / admin123
- **Обычный пользователь**: зарегистрируйтесь через веб-интерфейс

### 3. Пошаговый процесс создания видео:

#### Шаг 1: Регистрация и вход
- Зарегистрируйтесь на сайте или войдите в систему
- Перейдите в личный кабинет

#### Шаг 2: Создание проекта
- Нажмите "Создать новый проект"
- Введите название и описание проекта
- Сохраните проект

#### Шаг 3: Загрузка контента
- Загрузите видео с человеком (говорящим)
- Введите текст, который должен сказать человек
- Нажмите "Загрузить контент"

#### Шаг 4: Обработка
- Система автоматически:
  1. Генерирует аудио из текста (TTS)
  2. Синхронизирует движение губ с новым аудио (Wav2Lip)
  3. Создает финальное видео

#### Шаг 5: Скачивание результата
- Скачайте готовое видео с синхронизированной речью

## 🏗️ Архитектура системы

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Веб-клиент   │    │   Flask App     │    │   PostgreSQL    │
│   (Browser)     │◄──►│   (Container)   │◄──►│   (Container)   │
│   Port: 5000    │    │   Port: 5000    │    │   Port: 5432    │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                              │
                              ▼
                       ┌─────────────────┐
                       │   pgAdmin      │
                       │   (Container)   │
                       │   Port: 8080   │
                       └─────────────────┘
```

## 🛠️ Технологический стек

### Backend:
- **Flask 2.3.3** - веб-фреймворк
- **SQLAlchemy 3.0.5** - ORM для работы с БД
- **Flask-Login 0.6.3** - аутентификация пользователей
- **Werkzeug 2.3.7** - утилиты (хеширование паролей)
- **Gunicorn 21.2.0** - WSGI сервер

### Text-to-Speech:
- **gTTS 2.4.0** - Google Text-to-Speech (онлайн)
- **pyttsx3 2.90** - локальная генерация речи
- **espeak** - системный движок синтеза речи

### Frontend:
- **Bootstrap 5** - CSS фреймворк
- **Font Awesome 6.4.0** - иконки
- **jQuery 3.7.1** - JavaScript библиотека

### База данных:
- **PostgreSQL 15** - реляционная БД
- **psycopg2-binary 2.9.7** - драйвер PostgreSQL

### Контейнеризация:
- **Docker 27.5.1** - контейнеризация
- **Docker Compose** - оркестрация контейнеров

## 📁 Структура проекта

```
cursor/
├── webapp/                          # Веб-приложение
│   ├── app.py                      # Основное Flask приложение
│   ├── requirements.txt            # Python зависимости
│   ├── Dockerfile                  # Docker образ
│   ├── start.sh                    # Скрипт запуска
│   ├── templates/                  # HTML шаблоны
│   │   ├── base.html              # Базовый шаблон
│   │   ├── index.html             # Главная страница
│   │   ├── login.html             # Страница входа
│   │   ├── register.html          # Страница регистрации
│   │   ├── dashboard.html         # Дашборд пользователя
│   │   ├── new_project.html       # Создание проекта
│   │   ├── project_detail.html    # Детали проекта
│   │   ├── admin.html             # Админ панель
│   │   ├── 404.html               # Страница ошибки 404
│   │   └── 500.html               # Страница ошибки 500
│   └── static/                     # Статические файлы
├── courses_generator/              # Исходный код Wav2Lip
├── docker-compose.yml              # Конфигурация Docker Compose
├── Dockerfile                      # PostgreSQL контейнер
├── init.sql                        # Инициализация БД
├── setup.sh                        # Настройка PostgreSQL
├── database_client.py              # Клиент для работы с БД
├── build_and_run.sh                # Скрипт сборки и запуска
└── README.md                       # Основная документация
```

## 🔧 Управление системой

### Запуск всех сервисов:
```bash
sudo docker-compose up -d
```

### Остановка всех сервисов:
```bash
sudo docker-compose down
```

### Просмотр логов:
```bash
# Все сервисы
sudo docker-compose logs

# Конкретный сервис
sudo docker-compose logs webapp
sudo docker-compose logs postgres
sudo docker-compose logs pgadmin
```

### Проверка статуса:
```bash
sudo docker-compose ps
```

### Пересборка веб-приложения:
```bash
sudo docker-compose build webapp
sudo docker-compose up -d webapp
```

## 🎯 Следующие шаги

### 1. Интеграция с Wav2Lip:
- Подключите существующий код Wav2Lip из `courses_generator/`
- Настройте обработку видео с использованием сгенерированного аудио
- Добавьте мониторинг прогресса обработки

### 2. Улучшения TTS:
- Добавьте выбор голоса (мужской/женский)
- Поддержка разных языков
- Настройка скорости и тона речи

### 3. Улучшения безопасности:
- Настройка HTTPS
- Rate limiting
- Логирование действий
- Резервное копирование БД

### 4. Масштабирование:
- Добавление Redis для кэширования
- Настройка балансировщика нагрузки
- Мониторинг производительности
- Очереди задач (Celery)

## 🚨 Устранение неполадок

### Проблема: Веб-приложение не запускается
**Решение**: Проверьте логи `sudo docker-compose logs webapp`

### Проблема: Ошибка генерации аудио
**Решение**: Убедитесь, что установлены системные зависимости для TTS

### Проблема: Ошибка подключения к БД
**Решение**: Убедитесь, что PostgreSQL контейнер запущен и здоров

### Проблема: Страницы не загружаются
**Решение**: Проверьте, что контейнер webapp работает на порту 5000

### Проблема: Ошибки с правами доступа
**Решение**: Используйте `sudo` для Docker команд или добавьте пользователя в группу docker

## 📊 Мониторинг

### Проверка здоровья системы:
```bash
# Веб-приложение
curl -f http://localhost:5000/

# База данных
sudo docker exec courses_postgres pg_isready -U courses_user -d courses_db

# pgAdmin
curl -f http://localhost:8080/
```

### Полезные команды:
```bash
# Использование диска
sudo docker system df

# Очистка неиспользуемых ресурсов
sudo docker system prune -a

# Просмотр сетей
sudo docker network ls
```

## 🎉 Поздравляем!

Вы успешно создали полноценное веб-приложение для создания синхронизированных видео с использованием Text-to-Speech и Wav2Lip! 

**Основные достижения:**
- ✅ Веб-интерфейс с аутентификацией
- ✅ Управление проектами и файлами
- ✅ Text-to-Speech генерация аудио
- ✅ Интеграция с Wav2Lip (готово к подключению)
- ✅ PostgreSQL база данных
- ✅ Docker контейнеризация
- ✅ Современный дизайн
- ✅ Базовая безопасность

**Готово к использованию!** 🚀

---

**Courses Generator Web App** - профессиональная платформа для создания синхронизированных видео с помощью Text-to-Speech и Wav2Lip! 🎥🎵📝
